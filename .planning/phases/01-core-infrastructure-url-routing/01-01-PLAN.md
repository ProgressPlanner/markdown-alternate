---
phase: 01-core-infrastructure-url-routing
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - markdown-alternate.php
  - composer.json
  - src/Plugin.php
  - readme.txt
  - README.md
autonomous: true

must_haves:
  truths:
    - "Plugin activates without errors on fresh WordPress install"
    - "Composer autoloader loads classes from src/ directory"
    - "readme.txt passes WordPress.org validator format checks"
  artifacts:
    - path: "markdown-alternate.php"
      provides: "Plugin bootstrap with header and autoloader"
      contains: "Plugin Name:"
    - path: "composer.json"
      provides: "PSR-4 autoloading configuration"
      contains: "MarkdownAlternate"
    - path: "src/Plugin.php"
      provides: "Core plugin orchestrator singleton"
      contains: "class Plugin"
    - path: "readme.txt"
      provides: "WordPress.org plugin readme"
      contains: "=== Markdown Alternate ==="
    - path: "README.md"
      provides: "GitHub documentation"
      contains: "# Markdown Alternate"
  key_links:
    - from: "markdown-alternate.php"
      to: "vendor/autoload.php"
      via: "require_once"
      pattern: "require.*vendor/autoload"
    - from: "markdown-alternate.php"
      to: "src/Plugin.php"
      via: "Plugin::instance()"
      pattern: "Plugin::instance"
---

<objective>
Create the plugin foundation: Composer-based PHP project with PSR-4 autoloading, WordPress plugin boilerplate, and documentation files.

Purpose: Establish the infrastructure that URL routing and all future phases build upon. A working plugin skeleton that activates cleanly.
Output: Activatable WordPress plugin with proper namespacing and documentation.
</objective>

<execution_context>
@/Users/joostdevalk/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joostdevalk/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-core-infrastructure-url-routing/01-CONTEXT.md
@.planning/phases/01-core-infrastructure-url-routing/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Composer configuration and plugin bootstrap</name>
  <files>
    composer.json
    markdown-alternate.php
    src/Plugin.php
  </files>
  <action>
Create composer.json with PSR-4 autoloading for the MarkdownAlternate namespace:
- name: "joost/markdown-alternate"
- type: "wordpress-plugin"
- license: "GPL-2.0-or-later"
- require PHP >= 7.4
- autoload psr-4: "MarkdownAlternate\\" maps to "src/"
- config: optimize-autoloader true

Create markdown-alternate.php as the main plugin file:
- Standard WordPress plugin header (Plugin Name, Description, Version 1.0.0, Requires PHP 7.4, License GPL-2.0-or-later)
- ABSPATH check to prevent direct access
- Define constants: MARKDOWN_ALTERNATE_FILE (__FILE__), MARKDOWN_ALTERNATE_VERSION
- Require vendor/autoload.php
- Call Plugin::instance() to bootstrap

Create src/Plugin.php:
- Namespace: MarkdownAlternate
- Singleton pattern with private constructor and static instance() method
- Constructor registers activation/deactivation hooks via register_activation_hook() and register_deactivation_hook()
- Activation hook: placeholder for flush_rewrite_rules() (routing added in Plan 02)
- Deactivation hook: placeholder for flush_rewrite_rules()
- Method to initialize router (to be called in Plan 02)

Run `composer install` to generate vendor/autoload.php.

Code style: WordPress Coding Standards with short array syntax [], no Yoda conditions.
  </action>
  <verify>
1. Run `composer validate` - should pass with no errors
2. Run `composer install` - should generate vendor/ directory
3. Check file exists: vendor/autoload.php
4. PHP syntax check: `php -l markdown-alternate.php` and `php -l src/Plugin.php`
  </verify>
  <done>
- composer.json exists with valid PSR-4 config
- vendor/autoload.php generated
- markdown-alternate.php has correct plugin header
- src/Plugin.php implements singleton pattern
- All PHP files pass syntax check
  </done>
</task>

<task type="auto">
  <name>Task 2: Create documentation files</name>
  <files>
    readme.txt
    README.md
  </files>
  <action>
Create readme.txt following WordPress.org plugin readme format:
- Header: Markdown Alternate
- Contributors: joostdevalk
- Tags: markdown, content, api, llm
- Requires at least: 6.0
- Tested up to: 6.7
- Requires PHP: 7.4
- Stable tag: 1.0.0
- License: GPLv2 or later
- Short description (150 chars max): Provides markdown versions of posts and pages via .md URLs
- Description section: explain the plugin's purpose, list features (access posts at /slug.md, pages, nested pages, zero config)
- Requirements note: pretty permalinks must be enabled
- Installation section: upload, activate, visit URL with .md extension
- FAQ: "Why 404 errors?" (permalinks), "Configuration needed?" (no)
- Changelog: 1.0.0 - Initial release

Create README.md for GitHub/development:
- Title: Markdown Alternate
- Badges (optional, skip for now)
- Description matching plugin purpose
- Features list
- Installation instructions (Composer-based for developers)
- Usage examples with curl commands
- Requirements (WordPress 6.0+, PHP 7.4+, pretty permalinks)
- Development section (composer install)
- License: GPL-2.0-or-later
  </action>
  <verify>
1. readme.txt exists with correct WordPress.org format headers
2. README.md exists with markdown formatting
3. Both files mention the .md URL feature
4. readme.txt has all required sections (Description, Installation, FAQ, Changelog)
  </verify>
  <done>
- readme.txt follows WordPress.org format
- README.md provides clear project documentation
- Both files are consistent in describing the plugin
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Directory structure matches research recommendation:
   - markdown-alternate.php (root)
   - composer.json (root)
   - src/Plugin.php
   - readme.txt (root)
   - README.md (root)
   - vendor/ (generated)

2. Composer autoloader works:
   ```php
   php -r "require 'vendor/autoload.php'; echo class_exists('MarkdownAlternate\Plugin') ? 'OK' : 'FAIL';"
   ```
   Should output: OK
</verification>

<success_criteria>
- Plugin files exist and pass PHP syntax validation
- Composer autoloader correctly loads MarkdownAlternate\Plugin class
- Documentation files present with correct format
- Project ready for URL routing implementation in Plan 02
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-infrastructure-url-routing/01-01-SUMMARY.md`
</output>
